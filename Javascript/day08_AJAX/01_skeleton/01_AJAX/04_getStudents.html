<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>JSON 파일 이용</title>
  </head>

  <body>
    <h1>JSON 파일을 읽어 멤버를 호출해보자</h1>
    <textarea id="student" cols="30" rows="10"></textarea>
    <input type="button" value="출석" onclick="requestMsg()" />
    
    <script>
      
      function requestMsg(){
        const xhr = new XMLHttpRequest()
        xhr.onreadystatechange = function(){
          if(xhr.readyState = xhr.DONE){
            if(xhr.status === 200){
              // console.log(xhr.response)
              // 응답을 화면에 출력한다.
              const list = JSON.parse(xhr.response)
              const textarea = document.querySelector("#student")
              for(let i=0; i < list.length ; i++){
                textarea.value += `${list[i].id} : ${list[i].name}\n`
              }

            }
          }

        }

        xhr.open('GET','./data/students.json')
        xhr.send()

      }

    </script>
  </body>
</html>
